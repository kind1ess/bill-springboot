webpackJsonp([4],{chAp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("FWz8"),s=a("bQIR"),r=a("YaEn"),i=a("IcnI"),o=a("YXSm"),n={data:function(){return{admin:{},orderPreviewList:[],orderVo:{orderDto:{}},billOrderTitle:[],dialogVisible:!1,billParams:{billIdList:[]}}},created:function(){var t=this;this.admin=i.a.getters.admin,l.a.findOrderPreviewVoByStatusId(3).then(function(e){t.orderPreviewList=e.data.data.orderPreviewDtoList,s.Message.info("请选择待出库订单出库")})},methods:{handleDetailClick:function(t){var e=this;l.a.findOrderVo(t).then(function(t){e.orderVo=t.data.data,e.billOrderTitle[0]=t.data.data.orderDto,e.dialogVisible=!0})},handleSelect:function(t,e){e?this.billParams.billIdList.push(t):this.billParams.billIdList.splice(this.billParams.billIdList.indexOf(t),1)},handleSubmit:function(){o.a.addToOdo(this.billParams).then(function(t){var e=t.data.data;r.a.push({name:"odoVo",params:{billId:e}})}).finallyy(function(){s.Message.success("发货成功！")})},getSummaries:function(t){var e=t.columns,a=t.data,l=[];return e.forEach(function(t,e){if(0!==e){var s=a.map(function(e){return Number(e[t.property])});s.every(function(t){return isNaN(t)})||7!==e?l[e]="N/A":(l[e]=s.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),l[e]+=" 元")}else l[e]="总价"}),l},handleSelectionChange:function(t){var e=[];t.forEach(function(t){e.push(t.billId)}),this.billParams.billIdList=e}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderPreviewList,border:"",height:"85%",stripe:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单编号"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-s-order",staticStyle:{"margin-right":"15px"}}),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleDetailClick(e.row.billId)}}},[t._v(t._s(e.row.billId))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-time",staticStyle:{"margin-right":"15px"}}),t._v(" "),a("span",[t._v(t._s(e.row.createTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.statusId?a("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.row.statusName))]):5===e.row.statusId?a("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.row.statusName))]):a("el-tag",[t._v(t._s(e.row.statusName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"selection",width:"70px"}})],1),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticClass:"submit_button",attrs:{type:"success",disabled:0==t.billParams.billIdList.length},on:{click:t.handleSubmit}},[t._v("提交")])],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{data:t.billOrderTitle,border:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left","label-width":"100px"}},[a("el-form-item",{attrs:{label:"订单编号："}},[a("span",[t._v(t._s(e.row.billId))])]),t._v(" "),a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(e.row.createTime))])]),t._v(" "),a("el-form-item",{attrs:{label:"用户编号："}},[a("span",[t._v(t._s(e.row.userId))])]),t._v(" "),a("el-form-item",{attrs:{label:"用户账号："}},[a("span",[t._v(t._s(e.row.userAccount))])]),t._v(" "),a("el-form-item",{attrs:{label:"用户电话："}},[a("span",[t._v(t._s(e.row.userTelephone))])]),t._v(" "),a("el-form-item",{attrs:{label:"用户地址："}},[a("span",[t._v(t._s(e.row.userAddress))])]),t._v(" "),a("el-form-item",{attrs:{label:"订单状态："}},[a("span",[t._v(t._s(e.row.statusName))])])],1)]}}],null,!1,220134246)}),t._v(" "),a("el-table-column",{attrs:{label:"订单编号",prop:"billId"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"订单状态",prop:"statusName"}})],1),t._v(" "),a("div",{staticClass:"goods_list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.orderVo.goodsVoList,border:"","show-summary":"","summary-method":t.getSummaries}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsId",label:"产品编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"commodityName",label:"产品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"specificationName",label:"产品规格"}}),t._v(" "),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"产品单价"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"订货数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sumPrice",label:"小计"}})],1)],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(n,d,!1,function(t){a("v8ks")},"data-v-c2df1fd2",null);e.default=c.exports},v8ks:function(t,e){}});
//# sourceMappingURL=4.ee5592cdab54262d4bd9.js.map